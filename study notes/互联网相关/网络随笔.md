# token cookie sessionStorage localStorage

sessionStorage & localStorage
相同点:
储存大小为 5m 左右
都有同源限制策略
仅在客户端中保存，不参与和服务器的通信

差异:

1. 声明周期-数据可以存储多长时间
   localStorage 存储的数据是永久性的，除非认为删除，不然一直都在
   sessionStorage 与存储数据的脚本所在的标签页的有效期是相同的，一旦窗口或者标签被关闭，数据就会被删除
2. 作用域-谁拥有数据的访问权
   localStorage:在同一个浏览器内，同源文档之间共享 localStorage 数据，可以互相读取覆盖
   sessionStorage: 与 localStorage 一样需要同一浏览器同源文档这一条件。不仅如此，sessionStorage 的作用域还被限定在了窗口中，也就是说，只有同一浏览器、同一窗口的同源文档才能共享数据。

cookie

1. 大小限制为 4KB 左右
2. 主要用途是保存登录信息和标记用户(比如购物车)等,不过随着 localStorage 的出现，现在购物车的工作 Cookie 承担的较少了
3. 一般有服务器生成，可设置生效时间，如果在浏览器端生成 cookie，默认是关闭浏览器后失效
4. 每次都会携带在 http 头中，如果使用 cookie 保存过多的数据会带来新能问题
5. 原生 API 不如 storage 友好，需要自己封装函数

生成: 浏览器访问网站第一次发出请求的时候，服务器会响应并在响应头里面添加一个 Set-Cookie 选项，浏览器第二次发送请求的时候会通过 cookie 请求头部将 cookie 信息发送给服务器，服务端会辨别用户身份，另外，Cookie 的过期时间、域、路径、有效期、适用站点都可以根据需要来指定。

1. Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2018 07:28:00 GMT;//可以指定一个特定的过期时间（Expires）或有效期（Max-Age）
2. document.cookie='age=20;domain=.baidu.com'

缺陷:
不够大
过多的 cookie 会带来性能浪费
由于在 http 请求中的 cookie 是明文传递的，所以安全性成问题，除非用 https

安全:
https
设置 htmlOnly 标记

token 的存储问题

# https

流程: 客户端相服务器发起 SSL 握手，服务器返回了一个 SSL 证书，证书里面包含公钥 PUB\*KEY --> 客户端验证 SSL 证书是否有效，有效则生成 AES_KEY 并使用书中的公钥进行加密得到 AES_KEY_SECRET --> 使用 AES_KEY 对报文进行加密传输

CA 认证体系
