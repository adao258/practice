<!--
 * @Author: your name
 * @Date: 2022-02-15 15:30:48
 * @LastEditTime: 2022-02-17 13:40:30
 * @LastEditors: your name
 * @Description: 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
 * @FilePath: \Front-end development learning\document\notes\study notes\互联网相关\网络随笔.md
-->

# token cookie sessionStorage localStorage

sessionStorage & localStorage
相同点:
储存大小为 5m 左右
都有同源限制策略
仅在客户端中保存，不参与和服务器的通信

差异:

1. 声明周期-数据可以存储多长时间
   localStorage 存储的数据是永久性的，除非认为删除，不然一直都在
   sessionStorage 与存储数据的脚本所在的标签页的有效期是相同的，一旦窗口或者标签被关闭，数据就会被删除
2. 作用域-谁拥有数据的访问权
   localStorage:在同一个浏览器内，同源文档之间共享 localStorage 数据，可以互相读取覆盖
   sessionStorage: 与 localStorage 一样需要同一浏览器同源文档这一条件。不仅如此，sessionStorage 的作用域还被限定在了窗口中，也就是说，只有同一浏览器、同一窗口的同源文档才能共享数据。

cookie

1. 大小限制为 4KB 左右
2. 主要用途是保存登录信息和标记用户(比如购物车)等,不过随着 localStorage 的出现，现在购物车的工作 Cookie 承担的较少了
3. 一般有服务器生成，可设置生效时间，如果在浏览器端生成 cookie，默认是关闭浏览器后失效
4. 每次都会携带在 http 头中，如果使用 cookie 保存过多的数据会带来新能问题
5. 原生 API 不如 storage 友好，需要自己封装函数

生成: 浏览器访问网站第一次发出请求的时候，服务器会响应并在响应头里面添加一个 Set-Cookie 选项，浏览器第二次发送请求的时候会通过 cookie 请求头部将 cookie 信息发送给服务器，服务端会辨别用户身份，另外，Cookie 的过期时间、域、路径、有效期、适用站点都可以根据需要来指定。

1. Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2018 07:28:00 GMT;//可以指定一个特定的过期时间（Expires）或有效期（Max-Age）
2. document.cookie='age=20;domain=.baidu.com'

缺陷:
不够大
过多的 cookie 会带来性能浪费
由于在 http 请求中的 cookie 是明文传递的，所以安全性成问题，除非用 https

安全:
https
设置 htmlOnly 标记

token 的存储问题

# https

流程: 客户端相服务器发起 SSL 握手，服务器返回了一个 SSL 证书，证书里面包含公钥 PUB\*KEY --> 客户端验证 SSL 证书是否有效，有效则生成 AES_KEY 并使用书中的公钥进行加密得到 AES_KEY_SECRET --> 使用 AES_KEY 对报文进行加密传输

CA 认证体系

# 浏览器输入 url 后的处理

前提条件:
一个 Chrome 浏览器
一台 Linux 服务器
发起 HTML 请求
不考虑任何缓存和优化机制
采用 HTTP/1.1 + TLS/1.2 + TCP 协议

DNS 解析过程
首先，浏览器向本地 DNS 服务器发起请求，由于本地 DNS 服务器没有缓存不能直接将域名转换为 IP 地址，需要采用递归或者迭代查询的方式（图 3）依次向根域名服务器、顶级域名服务器、权威域名服务器发起查询请求，直至找到一个或一组 IP 地址，返回给浏览器。

HTTP 请求过程
拿到 ip 地址后,浏览器在通过系统调用 socket 接口与服务器 443 端口进行通信,整个过程可以分解为建立连接,发送 http 请求,返回 http 响应,维持连接,释放连接五个部分,

建立连接

# UDP & TCP

Tcp 协议是一种面向连接的，可靠的数据传输服务，可靠性指的是通过 TCP 协议传输数据可以无差错，不丢失，不重复，并且按序到达

他有以下特点
双方在连接建立之后，都可以在任何时候进行数据发送
有缓存，发送和接收时都可以利用缓存临时存放数据
tcp 时面向字节流的

UDP 协议是无连接的，不可靠的
无连接
不可靠
面向报文
支持 n 对 n 的交互通信
UDP 无拥塞控制
