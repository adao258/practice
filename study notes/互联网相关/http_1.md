## 第一章 HTTP 概述

- Web 客户端与服务器如何通信的
  web 的内容是存储在 web 服务器上面的(例如网页 HTML，音频，视频，文本)，这些服务器存储了数据，当 HTTP 客户端发起请求，服务器会在 HTTP 响应中回送所请求的数据。因此 HTTP 的客户端和 HTTP 的服务器共同构成了万维网的基本组件(最常见的 web 客户端就是浏览器)
- 表示 web 内容的资源来自何方
  web 服务器是 web 资源的宿主，web 资源是 web 内容的源头，最简单的 web 资源就是 web 服务器里面的静态文件。例如:文本文件，HTML 文件，图片，音频，视频。还有动态资源，它可以根据你的身份，所请求的信息或每天不同的时段来产生内容。
- 媒体类型:
  web 传输的对象都有 MIME(多用途因特网邮件扩展) 类型的数据格式标签。当 web 浏览器从服务器取回一个对象的时候，会查看相关的 MIME 类型，看他是否知道如何处理这个对象
  1. MIME 类型是一种文本标记，表示一种主要的类型和一个特定的子类型，中间由一条斜杠分割
  2. html 格式的文本文档由 text/html 类型来标记
  3. 普通的 ASCII 文本文档由 text/plain 类型来标记
  4. JPEG 版本的图片为 image/jpeg 类型来标记
  5. GIF 格式的图片欸 image/gif 类型标记
- URI 有两种形式 URL 和 URN
  每个服务器资源都有一个名字被称为统一资源标识符。他的作用就类似于邮政地址一样，是唯一标识并定位信息资源
- URL
  统一资源定位符: 他描述了一台特定服务器上某资源的特定位置
  url 分为三个部分
  1. 第一部分称为协议(http://)
  2. 第二部分给出了地址(www.baidu.com)
  3. 其余部分指定了 web 服务器上的某个资源(/a/b/c)
- URN
  统一资源名: URN 是作为特定内容的唯一名称使用的，与目前的资源所在地无关，通过 URN 就可以对同一个名字通过多种协议来访问资源
- HTTP 几种常见的请求方法(GET, PUT, POST, HEAD, DELETE )
- HTTP 报文: 分为请求报文和响应报文
  1. 起始行: 报文的第一行就是起始行，在请求报文中来说明要做些什么，在响应报文中说明出现了什么情况
  2. 首部字段: 起始行后面有零个或多个首部字段，每个首部字段都包含一个名字和一个值，两者之间用冒号
  3. 主体: 在空行之后就是可选报文的主体，其中包含了所有类型的数据
- 在报文响应之后就可以通过 TCP 传输控制协议连接从一个地方搬移到另一个地方去
- HTTP 协议是应用层协议，它无需操心网络通信的具体细节，联网的细节都交给了 TCP/IP 网络传输协议。TCP/IP 提供了(无差错的数据传输;按序传输;未分段的数据流)
- HTTP(应用层) -> TCP(传输层) -> IP(网络层) -> 网络特有的链路接口(数据链路层) -> 物理网络硬件(物理层)
- 在 HTTP 客户端向服务器发送报文之前，需要用到网络协议 IP 地址和端口号在客户端和服务器之间简历一条 TCP/IP 协议
- 步骤

  1. 浏览器从 URL 解析出服务器的主机名
  2. 历览器将服务器的主机名转换为服务器的 IP 地址
  3. 浏览器将端口号从 URL 中解析出来
  4. 浏览器建立一条与 WEB 服务器的 TCP 连接
  5. 浏览器向服务器发送一条 HTTP 请求报文
  6. 服务器向浏览器发送一条 HTTP 响应报文
  7. 关闭连接， 浏览器显示文档

- web 结构组件
  1. 代理: 位于客户端和服务器之间的 HTTP 中间实体
  2. 缓存: HTTP 的仓库，使常用页面的副本可以保存离客户端更近的地方
  3. 网关: 连接其他应用程序的特殊 WEB 服务器
  4. 隧道: 对 HTTP 协议进行盲转发的特殊代理
  5. Agent 代理: 发起自动 HTTP 请求的半智能 WEB 客户端
- 代理:他位于客户端和服务器之间，接受客户端的所有 http 请求，并将这些请求转发给服务器(期间可以对请求进行修改之后转 发)
- 缓存: web 缓存或代理缓存
- 网关: 是一种特殊的服务器，作为其他服务器的中间实体使用，通常用于将 http 流量转换成其他协议，就好像一个服务器一样
- 隧道: 是建立起来之后在两条连接之间对原始数据进行盲转发的 HTTP 应用程序，它通常在一条或者多条 HTTP 连接上转发非 HTTP 数据，转发时不会窥探数据
- Agent 代理: 是代表用户发起 HTTP 请求的客户端程序，

## 第二章 URL 与资源

## 第三章 HTTP 报文

- HTTP 报文是在 HTTP 应用程序之间发送的数据块，
- 报文的组成: 对报文进行描述的起始行；包含属性的首部块；以及可选的包含数据的主体块

## 第四章 连接管理

- HTTPS: HTTP(应用层) -> SSL OR TSL(安全层) -> TCP(传输层) -> IP(网络层) -> 网络接口(数据链路层)
- TCP 连接是通过四个值来识别的<源 ip 地址， 源端口号， 目的 IP 地址，目的端口号>
- HTTP 事务延迟
  1. 客户端需要根据 URI 来确定 web 服务器的 ip 地址和端口号，如果最近没有对 URI 中的主机名进行访问，通过 DNS 解析系统将 URI 中的主机名转换成一个 ip 地址可能需要花费数十秒的时间
  2. 接下来，客户端会向服务器发送一条 TCP 连接请求，并等待服务器响应，每条 TCP 连接都会有一两秒的时延，但是如果有上百条的连接会叠加连接时间
  3. 连接成功后，因特网请求报文，响应报文都会耗费时间
  4. 发送 HTTP 响应会花费时间
- 提高 HTTP 性能
  1. 并行连接: 通过多条 TCP 连接发起并发的 HTTP 请求
  2. 持久连接: 重用 TCP 连接，以消除连接及关闭时延(类似于缓存，在请求一次 web 站点后，服务器会将 tcp 连接保持在打开的状态，知道服务器关闭为止)
  3. 持久连接以及并行连接配合使用: 持久连接有两种类型
     HTTP/1.0 + keep alive
     HTTP/1.1 + persistent
  4. 管道化连接: 通过共享的 TCP 连接发起并发的 HTTP 请求
  5. 复用的连接: 交替传送请求和响应的报文

## 第五章 web 服务器

- 实际的 web 服务器会做些什么
  1. 建立连接
  2. 接受请求
  3. 处理请求
  4. 访问资源
  5. 构建响应
  6. 发送响应
  7. 记录事务处理过程

## 第六章 代理

- 代理分为单个代理和公共代理
- 代理和网关的对比
  代理连接的是两个或多个使用相同协议的应用程序。网关连接的则是两个或多个使用不同协议的端口
- 代理服务器的部署
  1. 出口代理
  2. 入口代理
  3. 反向代理
  4. 网络交换代理
- 动态选择父代理
  1. 负载均衡
  2. 地理位置附近的路由
  3. 协议/类型路由
  4. 基于订购的路由

## 第七章 缓存

- 缓存解决的问题
  1. 冗余的数据传输
  2. 带宽瓶颈
  3. 瞬间拥塞
  4. 距离延时
- 缓存的处理过程
  1. 接收--缓存从网络中读取抵达的请求报文
  2. 解析--缓存对读取的报文进行解析，提取出 url 和各种首部
  3. 查询--缓存查看是否有本地副本可用，如果没有就获取一份副本，并将其保存到本地
  4. 新鲜度检测--缓存查看副本是否新鲜，不是就向服务器询问是否有更新
  5. 创建响应--缓存会用新的首部和已缓存的主体来构建以一条响应报文
  6. 发送--缓存通过网络将响应发送回客户端
  7. 日志--描述这个事务

## 第八章 集成点: 网关 隧道 中继

-
-
-
-
-
-
-
-
-
-
-
